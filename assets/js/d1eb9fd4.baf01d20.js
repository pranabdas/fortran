"use strict";(self.webpackChunkfortran_programing=self.webpackChunkfortran_programing||[]).push([[328],{3307:function(e,n,a){a.r(n),a.d(n,{assets:function(){return c},contentTitle:function(){return d},default:function(){return k},frontMatter:function(){return s},metadata:function(){return m},toc:function(){return p}});var t=a(7462),o=a(3366),r=(a(7294),a(3905)),i=a(5710),l=["components"],s={title:"Modules"},d=void 0,m={unversionedId:"modules",id:"modules",title:"Modules",description:"Large programs can be organized in separate modules and procedures. Here is an",source:"@site/docs/modules.mdx",sourceDirName:".",slug:"/modules",permalink:"/fortran/modules",draft:!1,editUrl:"https://github.com/pranabdas/fortran/blob/main/docs/modules.mdx",tags:[],version:"current",frontMatter:{title:"Modules"},sidebar:"docs",previous:{title:"File I/O",permalink:"/fortran/file"},next:{title:"Procedures",permalink:"/fortran/procedures"}},c={},p=[{value:"USE keyword",id:"use-keyword",level:2}],u={toc:p};function k(e){var n=e.components,a=(0,o.Z)(e,l);return(0,r.kt)("wrapper",(0,t.Z)({},u,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Large programs can be organized in separate modules and procedures. Here is an\nexample. We store various mathematical and physical constants in a module named\n",(0,r.kt)("inlineCode",{parentName:"p"},"constants_module"),"."),(0,r.kt)(i.Z,{language:"fortran",title:"src/11_const_module.f90",showLineNumbers:!0,mdxType:"CodeBlock"},"MODULE const_module\n  IMPLICIT none\n  PRIVATE\n\n  REAL, PUBLIC, PARAMETER :: pi = 3.14159265\n  REAL, PUBLIC, PARAMETER :: e  = 2.71828182\n\nEND MODULE const_module\n"),(0,r.kt)("p",null,"Now we write a program that uses the above module:"),(0,r.kt)(i.Z,{language:"fortran",title:"src/11_circ_area.f90",showLineNumbers:!0,mdxType:"CodeBlock"},'PROGRAM circ_area\n  USE const_module\n  \n  IMPLICIT none\n\n  REAL :: rad = 5.0, area\n\n  area = pi*rad**2\n\n  PRINT *, "Area = ", area\nEND PROGRAM circ_area\n'),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"PRIVATE")," keyword makes sure everything is private otherwise declared as\n",(0,r.kt)("inlineCode",{parentName:"p"},"PUBLIC"),". Private variables are accessible only to the module, while public\nvariables are accessible to the programs that uses it. There is also ",(0,r.kt)("inlineCode",{parentName:"p"},"PROTECTED"),"\nkeyword, which allows the variable to be accessible but the value cannot be\nmodified. Compile and run our module and program:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"gfortran -c 11_const_module.f90\ngfortran 11_circ_area.f90 11_const_module.o\n./a.out\n")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Modules need to be compiled before the program that uses it. If both are placed\nin the same source file, the module should come before the program. Once the\nmodule is compiled, it will create ",(0,r.kt)("inlineCode",{parentName:"p"},".o")," and ",(0,r.kt)("inlineCode",{parentName:"p"},".mod")," files. When we compile the\nprogram, we only need to provide the ",(0,r.kt)("inlineCode",{parentName:"p"},".o")," file for linking, the compiler will\nfind the ",(0,r.kt)("inlineCode",{parentName:"p"},".mod")," files. If the files are on a different directory, specify via\n",(0,r.kt)("inlineCode",{parentName:"p"},"-I<dir>")," option."),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"gfortran -I./ 11_circ_area.f90\n")))),(0,r.kt)("h2",{id:"use-keyword"},"USE keyword"),(0,r.kt)("p",null,"Rename a variable:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-fortran"},"use const_module, math_pi => pi\n")),(0,r.kt)("p",null,"Use only certain variables:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-fortran"},"use const_module, only : pi\nuse const_module, only : pi, e\n")),(0,r.kt)("p",null,"Last command is same as:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-fortran"},"use const_module, only : pi\nuse const_module, only : e\n")),(0,r.kt)("p",null,"Use pi and rename e:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-fortran"},"use const_module, only : pi, log_base => e\n")))}k.isMDXComponent=!0}}]);